{% from 'value_or_default.jinja2' import value_or_default %}
{% macro generate_performance_indicator_table(request, location_type, dataset) %}
  <div class="portlet-body">
  {% if dataset['summary_row'] %}
    <div class="table-responsive table-scrollable">
        <table class="table table-striped table-bordered table-hover data-table">
            <thead>
                <tr>
                    {% for header in dataset['headers'] %}
                        <th class="data-header">
                        {{ header }}
                        </th>
                     {% endfor %}
                 </tr>
            </thead>
            <tbody>
               {% for row in dataset['rows'] %}
                  <tr>
                     <td><a href="{{ request.route_url(location_type, traverse=(row[0].id)) }}">{{ row[0].pretty }}</a></td>
                     {% for col in row[1:] %}
                        {% set target = col[0] %}
                        {% set actual = col[1] %}
                        {% set percentage = col[2] %}
                        <td>
                            {{ value_or_default(percentage|format_value(request), '-') }}
                            <span class="ratio">
                                {{ value_or_default(actual|format_value(request), '-') }}
                                /{{ value_or_default(target|format_value(request), '-') }}
                            </span>
                        </td>
                     {% endfor %}
                  </tr>
               {% endfor %}
                  <tr class="bold">
                     <td>
                        {% trans %} Total Summary {% endtrans %}
                     </td>
                     {% for col in dataset['summary_row']%}
                        {% set target = col[0] %}
                        {% set actual = col[1] %}
                        {% set percentage = col[2] %}
                        <td>
                            {{ value_or_default(percentage|format_value(request), '-') }}
                            <span class="ratio">
                                {{ value_or_default(actual|format_value(request), '-') }}
                                /{{ value_or_default(target|format_value(request), '-') }}
                            </span>
                        </td>
                     {% endfor %}
                  </tr>
            </tbody>
        </table>
    </div>
    {% else %}
        <div>{% trans %}No reports found for available projects{% endtrans %}</div>
  {% endif %}
{% endmacro %}
